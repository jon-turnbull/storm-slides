(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _component = require('./libs/component');

var _component2 = _interopRequireDefault(_component);

function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
}

var onDOMContentLoadedTasks = [function () {
    _component2.default.init('.js-slides-standard');
    _component2.default.init('.js-slides-autoplay', { autoPlay: true, slideDuration: 3 });
}];

if ('addEventListener' in window) window.addEventListener('DOMContentLoaded', function () {
    onDOMContentLoadedTasks.forEach(function (fn) {
        return fn();
    });
});

},{"./libs/component":2}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _defaults = require('./lib/defaults');

var _defaults2 = _interopRequireDefault(_defaults);

var _componentPrototype = require('./lib/component-prototype');

var _componentPrototype2 = _interopRequireDefault(_componentPrototype);

function _interopRequireDefault(obj) {
	return obj && obj.__esModule ? obj : { default: obj };
}

var init = function init(sel, opts) {
	var els = [].slice.call(document.querySelectorAll(sel));
	//let els = Array.from(document.querySelectorAll(sel));

	if (!els.length) throw new Error('Slides not initialised, no augmentable elements found');

	return els.map(function (el) {
		return Object.assign(Object.create(_componentPrototype2.default), {
			node: el,
			settings: Object.assign({}, _defaults2.default, opts)
		}).init();
	});
};

exports.default = { init: init };

},{"./lib/component-prototype":3,"./lib/defaults":4}],3:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
var KEY_CODES = {
	ENTER: 13
},
    TRIGGER_EVENTS = ['click', 'keydown'];

exports.default = {
	init: function init() {
		var _this = this;

		this.slides = [].slice.call(this.node.querySelectorAll(this.settings.itemSelector)).map(function (slide) {
			return {
				unloadedImgs: [].slice.call(slide.querySelectorAll('[data-srcset], [data-src]')),
				container: slide
			};
		});

		this.nextButton = this.node.querySelector(this.settings.buttonNextSelector);
		this.previousButton = this.node.querySelector(this.settings.buttonPreviousSelector);
		this.navItems = [].slice.call(this.node.querySelectorAll(this.settings.navItemSelector));

		if (this.navItems.length > 0 && this.navItems.length !== this.slides.length) throw new Error('Slide navigation does not match the number of slides.');

		this.notification = this.node.querySelector(this.settings.liveRegionSelector);
		this.setCurrent(this.settings.startIndex);
		this.slides[this.currentIndex].container.classList.add(this.settings.activeClass);
		this.initHandlers();
		this.settings.preload ? this.slides.forEach(function (slide, i) {
			_this.loadImage(i);
		}) : this.loadImages(this.settings.startIndex);
		this.settings.autoPlay ? this.autoPlay(this.settings.slideDuration, this.next) : null;
		return this;
	},
	initHandlers: function initHandlers() {
		var _this2 = this;

		TRIGGER_EVENTS.forEach(function (ev) {
			['previous', 'next'].forEach(function (type) {
				if (_this2[type + 'Button']) _this2[type + 'Button'].addEventListener(ev, function (e) {
					if (e.keyCode && e.keyCode !== KEY_CODES.ENTER) return;
					_this2[type]();
				});
			});
			_this2.navItems.length > 0 && _this2.navItems.forEach(function (item, i) {
				item.addEventListener(ev, function (e) {
					if (e.keyCode && e.keyCode !== KEY_CODES.ENTER) return;
					_this2.change(i);
				});
			});
		});
	},
	loadImage: function loadImage(i) {
		var _this3 = this;

		if (!this.slides[i].unloadedImgs.length) return;

		this.slides[i].container.classList.add(this.settings.loadingClass);
		this.slides[i].unloadedImgs = this.slides[i].unloadedImgs.reduce(function (acc, el) {
			['src', 'srcset'].forEach(function (type) {
				if (el.hasAttribute('data-' + type)) {
					el.setAttribute(type, el.getAttribute('data-' + type));
					el.removeAttribute('data-' + type);
				}
				_this3.slides[i].container.classList.remove(_this3.settings.loadingClass);
			});
			return acc;
		}, []);
	},
	loadImages: function loadImages(i) {
		var _this4 = this;

		if (!this.node.querySelector('[data-src], [data-srcset]')) return;
		var indexes = [i];

		if (this.slides.length > 1) indexes.push(i === 0 ? this.slides.length - 1 : i - 1);
		if (this.slides.length > 2) indexes.push(i === this.slides.length - 1 ? 0 : i + 1);

		indexes.forEach(function (idx) {
			_this4.loadImage(idx);
		});
	},
	reset: function reset() {
		this.slides[this.currentIndex].container.classList.remove(this.settings.activeClass);
		this.slides[this.currentIndex].container.removeAttribute('tabindex');
		this.navItems.length && this.navItems[this.currentIndex].removeAttribute('aria-current');

		var previouslyHidden = this.node.querySelector('.' + this.settings.hidePreviousClass),
		    previouslyShown = this.node.querySelector('.' + this.settings.showPreviousClass),
		    nextShown = this.node.querySelector('.' + this.settings.showNextClass),
		    nextHidden = this.node.querySelector('.' + this.settings.hideNextClass);

		previouslyHidden && previouslyHidden.classList.remove(this.settings.hidePreviousClass);
		previouslyShown && previouslyShown.classList.remove(this.settings.showPreviousClass);
		nextShown && nextShown.classList.remove(this.settings.showNextClass);
		nextHidden && nextHidden.classList.remove(this.settings.hideNextClass);
	},
	next: function next() {
		this.change(this.currentIndex === this.slides.length - 1 ? 0 : this.currentIndex + 1);
	},
	previous: function previous() {
		this.change(this.currentIndex === 0 ? this.slides.length - 1 : this.currentIndex - 1);
	},
	change: function change(index) {
		if (index === this.currentIndex) return;

		this.reset();

		index = index === -1 ? this.slides.length - 1 : index === this.slides.length ? 0 : index;

		this.loadImages(index);

		var isForwards = (index > this.currentIndex || index === 0 && this.currentIndex === this.slides.length - 1) && !(index === this.slides.length - 1 && this.currentIndex === 0);

		this.slides[this.currentIndex].container.classList.add(isForwards ? this.settings.hidePreviousClass : this.settings.hideNextClass);
		this.slides[index].container.classList.add('' + (isForwards ? this.settings.showNextClass : this.settings.showPreviousClass));
		this.setCurrent(index);

		this.settings.callback && typeof this.settings.callback === 'function' && this.settings.callback();
	},
	setCurrent: function setCurrent(i) {
		this.slides[i].container.classList.add(this.settings.activeClass);
		this.slides[i].container.setAttribute('tabindex', '-1');
		this.slides[i].container.focus();
		this.navItems.length && this.navItems[i].setAttribute('aria-current', true);
		this.notification.innerHTML = 'Slide ' + (i + 1) + ' of ' + this.slides.length;
		this.currentIndex = i;
	},
	autoPlay: function autoPlay(slideDuration) {
		var _this5 = this;

		this.interval = setInterval(function () {
			_this5.next();
		}, slideDuration ? slideDuration * 1000 : 5000);
	}
};

},{}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = {
	buttonPreviousSelector: '.js-slides__previous',
	buttonNextSelector: '.js-slides__next',
	navItemSelector: '.js-slides__nav-item',
	itemSelector: '.js-slides__item',
	liveRegionSelector: '.js-slides__liveregion',
	loadingClass: 'is--loading',
	activeClass: 'is--current',
	showPreviousClass: 'show--previous',
	showNextClass: 'show--next',
	hidePreviousClass: 'hide--previous',
	hideNextClass: 'hide--next',
	isCarousel: true,
	startIndex: 0,
	preload: false
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJleGFtcGxlXFxzcmNcXGFwcC5qcyIsImV4YW1wbGVcXHNyY1xcbGlic1xcY29tcG9uZW50XFxpbmRleC5qcyIsImV4YW1wbGVcXHNyY1xcbGlic1xcY29tcG9uZW50XFxsaWJcXGNvbXBvbmVudC1wcm90b3R5cGUuanMiLCJleGFtcGxlXFxzcmNcXGxpYnNcXGNvbXBvbmVudFxcbGliXFxkZWZhdWx0cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7Ozs7Ozs7O0FBRUEsSUFBTSwyQkFBMkIsWUFBTSxBQUNuQzt3QkFBQSxBQUFPLEtBQVAsQUFBWSxBQUNaO3dCQUFBLEFBQU8sS0FBUCxBQUFZLHVCQUF1QixFQUFFLFVBQUYsQUFBWSxNQUFNLGVBQXJELEFBQW1DLEFBQWlDLEFBQ3ZFO0FBSEQsQUFBZ0MsQ0FBQTs7QUFLaEMsSUFBRyxzQkFBSCxBQUF5QixlQUFRLEFBQU8saUJBQVAsQUFBd0Isb0JBQW9CLFlBQU0sQUFBRTs0QkFBQSxBQUF3QixRQUFRLFVBQUEsQUFBQyxJQUFEO2VBQUEsQUFBUTtBQUF4QyxBQUFnRDtBQUFwRyxDQUFBOzs7Ozs7Ozs7QUNQakM7Ozs7QUFDQTs7Ozs7Ozs7QUFFQSxJQUFNLE9BQU8sU0FBUCxBQUFPLEtBQUEsQUFBQyxLQUFELEFBQU0sTUFBUyxBQUMzQjtLQUFJLE1BQU0sR0FBQSxBQUFHLE1BQUgsQUFBUyxLQUFLLFNBQUEsQUFBUyxpQkFBakMsQUFBVSxBQUFjLEFBQTBCLEFBQy9DO0FBRUg7O0tBQUcsQ0FBQyxJQUFKLEFBQVEsUUFBUSxNQUFNLElBQUEsQUFBSSxNQUFWLEFBQU0sQUFBVSxBQUVoQzs7WUFBTyxBQUFJLElBQUksVUFBQSxBQUFDLElBQU8sQUFDdEI7Z0JBQU8sQUFBTyxPQUFPLE9BQUEsQUFBTyw0QkFBckI7U0FBaUQsQUFDakQsQUFDTjthQUFVLE9BQUEsQUFBTyxPQUFQLEFBQWMsd0JBRmxCLEFB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QyxPQUZuQyxBQUFnQixBQUUwQixBQUM3QztBLEFBaEhVO0FBQUEsQUFDZDs7Ozs7Ozs7O3lCQ05jLEFBQ1UsQUFDeEI7cUJBRmMsQUFFTSxBQUNwQjtrQkFIYyxBQUdHLEFBQ2pCO2VBSmMsQUFJQSxBQUNkO3FCQUxjLEFBS00sQUFDcEI7ZUFOYyxBQU1BLEFBQ2Q7Y0FQYyxBQU9ELEFBQ2I7b0JBUmMsQUFRSyxBQUNuQjtnQkFUYyxBQVNDLEFBQ2Y7b0JBVmMsQUFVSyxBQUNuQjtnQkFYYyxBQVdDLEFBQ2Y7YUFaYyxBQVlGLEFBQ1o7YUFiYyxBQWFGLEFBQ1o7VSxBQWRjLEFBY0w7QUFkSyxBQUNkIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCBTbGlkZXMgZnJvbSAnLi9saWJzL2NvbXBvbmVudCc7XHJcblxyXG5jb25zdCBvbkRPTUNvbnRlbnRMb2FkZWRUYXNrcyA9IFsoKSA9PiB7XHJcbiAgICBTbGlkZXMuaW5pdCgnLmpzLXNsaWRlcy1zdGFuZGFyZCcpO1xyXG4gICAgU2xpZGVzLmluaXQoJy5qcy1zbGlkZXMtYXV0b3BsYXknLCB7IGF1dG9QbGF5OiB0cnVlLCBzbGlkZUR1cmF0aW9uOiAzIH0pO1xyXG59XTtcclxuICAgIFxyXG5pZignYWRkRXZlbnRMaXN0ZW5lcicgaW4gd2luZG93KSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHsgb25ET01Db250ZW50TG9hZGVkVGFza3MuZm9yRWFjaCgoZm4pID0+IGZuKCkpOyB9KTsiLCJpbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi9saWIvZGVmYXVsdHMnO1xyXG5pbXBvcnQgY29tcG9uZW50UHJvdG90eXBlIGZyb20gJy4vbGliL2NvbXBvbmVudC1wcm90b3R5cGUnO1xyXG5cclxuY29uc3QgaW5pdCA9IChzZWwsIG9wdHMpID0+IHtcclxuXHRsZXQgZWxzID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbCkpO1xyXG4gICAgLy9sZXQgZWxzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbCkpO1xyXG5cclxuXHRpZighZWxzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdTbGlkZXMgbm90IGluaXRpYWxpc2VkLCBubyBhdWdtZW50YWJsZSBlbGVtZW50cyBmb3VuZCcpO1xyXG4gICAgXHJcblx0cmV0dXJuIGVscy5tYXAoKGVsKSA9PiB7XHJcblx0XHRyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGNvbXBvbmVudFByb3RvdHlwZSksIHtcclxuXHRcdFx0bm9kZTogZWwsXHJcblx0XHRcdHNldHRpbmdzOiBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0cywgb3B0cylcclxuXHRcdH0pLmluaXQoKTtcclxuXHR9KTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHsgaW5pdCB9OyIsImNvbnN0IEtFWV9DT0RFUyA9IHtcclxuXHRcdEVOVEVSOiAxM1xyXG5cdH0sXHJcblx0VFJJR0dFUl9FVkVOVFMgPSBbJ2NsaWNrJywgJ2tleWRvd24nIF07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcblx0aW5pdCgpe1xyXG5cdFx0dGhpcy5zbGlkZXMgPSBbXS5zbGljZS5jYWxsKHRoaXMubm9kZS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuc2V0dGluZ3MuaXRlbVNlbGVjdG9yKSlcclxuXHRcdFx0XHRcdFx0Lm1hcChzbGlkZSA9PiAoe1xyXG5cdFx0XHRcdFx0XHRcdHVubG9hZGVkSW1nczogW10uc2xpY2UuY2FsbChzbGlkZS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1zcmNzZXRdLCBbZGF0YS1zcmNdJykpLFxyXG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5lcjogc2xpZGVcclxuXHRcdFx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdHRoaXMubmV4dEJ1dHRvbiA9IHRoaXMubm9kZS5xdWVyeVNlbGVjdG9yKHRoaXMuc2V0dGluZ3MuYnV0dG9uTmV4dFNlbGVjdG9yKTtcclxuXHRcdHRoaXMucHJldmlvdXNCdXR0b24gPSB0aGlzLm5vZGUucXVlcnlTZWxlY3Rvcih0aGlzLnNldHRpbmdzLmJ1dHRvblByZXZpb3VzU2VsZWN0b3IpO1xyXG5cdFx0dGhpcy5uYXZJdGVtcyA9IFtdLnNsaWNlLmNhbGwodGhpcy5ub2RlLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5zZXR0aW5ncy5uYXZJdGVtU2VsZWN0b3IpKTtcclxuXHJcblx0XHRpZih0aGlzLm5hdkl0ZW1zLmxlbmd0aCA+IDAgJiYgdGhpcy5uYXZJdGVtcy5sZW5ndGggIT09IHRoaXMuc2xpZGVzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdTbGlkZSBuYXZpZ2F0aW9uIGRvZXMgbm90IG1hdGNoIHRoZSBudW1iZXIgb2Ygc2xpZGVzLicpO1xyXG5cclxuXHRcdHRoaXMubm90aWZpY2F0aW9uID0gdGhpcy5ub2RlLnF1ZXJ5U2VsZWN0b3IodGhpcy5zZXR0aW5ncy5saXZlUmVnaW9uU2VsZWN0b3IpO1xyXG5cdFx0dGhpcy5zZXRDdXJyZW50KHRoaXMuc2V0dGluZ3Muc3RhcnRJbmRleCk7XHJcblx0XHR0aGlzLnNsaWRlc1t0aGlzLmN1cnJlbnRJbmRleF0uY29udGFpbmVyLmNsYXNzTGlzdC5hZGQodGhpcy5zZXR0aW5ncy5hY3RpdmVDbGFzcyk7XHJcblx0XHR0aGlzLmluaXRIYW5kbGVycygpO1xyXG5cdFx0dGhpcy5zZXR0aW5ncy5wcmVsb2FkID8gdGhpcy5zbGlkZXMuZm9yRWFjaCgoc2xpZGUsIGkpID0+IHsgdGhpcy5sb2FkSW1hZ2UoaSk7IH0pIDogdGhpcy5sb2FkSW1hZ2VzKHRoaXMuc2V0dGluZ3Muc3RhcnRJbmRleCk7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5hdXRvUGxheSA/IHRoaXMuYXV0b1BsYXkodGhpcy5zZXR0aW5ncy5zbGlkZUR1cmF0aW9uLCB0aGlzLm5leHQpIDogbnVsbDtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0aW5pdEhhbmRsZXJzKCl7XHJcblx0XHRUUklHR0VSX0VWRU5UUy5mb3JFYWNoKGV2ID0+IHtcclxuXHRcdFx0WydwcmV2aW91cycsICduZXh0J10uZm9yRWFjaCh0eXBlID0+IHtcclxuXHRcdFx0XHRpZih0aGlzW2Ake3R5cGV9QnV0dG9uYF0pIHRoaXNbYCR7dHlwZX1CdXR0b25gXS5hZGRFdmVudExpc3RlbmVyKGV2LCBlID0+IHtcclxuXHRcdFx0XHRcdGlmKGUua2V5Q29kZSAmJiBlLmtleUNvZGUgIT09IEtFWV9DT0RFUy5FTlRFUikgcmV0dXJuO1xyXG5cdFx0XHRcdFx0dGhpc1t0eXBlXSgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5uYXZJdGVtcy5sZW5ndGggPiAwICYmIHRoaXMubmF2SXRlbXMuZm9yRWFjaCgoaXRlbSwgaSlcdCA9PiB7XHJcblx0XHRcdFx0aXRlbS5hZGRFdmVudExpc3RlbmVyKGV2LCBlID0+IHtcclxuXHRcdFx0XHRcdGlmKGUua2V5Q29kZSAmJiBlLmtleUNvZGUgIT09IEtFWV9DT0RFUy5FTlRFUikgcmV0dXJuO1xyXG5cdFx0XHRcdFx0dGhpcy5jaGFuZ2UoaSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cdGxvYWRJbWFnZShpKXtcclxuXHRcdGlmKCF0aGlzLnNsaWRlc1tpXS51bmxvYWRlZEltZ3MubGVuZ3RoKSByZXR1cm47XHJcblx0XHRcclxuXHRcdHRoaXMuc2xpZGVzW2ldLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKHRoaXMuc2V0dGluZ3MubG9hZGluZ0NsYXNzKTtcclxuXHRcdHRoaXMuc2xpZGVzW2ldLnVubG9hZGVkSW1ncyA9IHRoaXMuc2xpZGVzW2ldLnVubG9hZGVkSW1ncy5yZWR1Y2UoKGFjYywgZWwpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFsnc3JjJywgJ3NyY3NldCddLmZvckVhY2godHlwZSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKGVsLmhhc0F0dHJpYnV0ZShgZGF0YS0ke3R5cGV9YCkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbC5zZXRBdHRyaWJ1dGUodHlwZSwgZWwuZ2V0QXR0cmlidXRlKGBkYXRhLSR7dHlwZX1gKSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZWwucmVtb3ZlQXR0cmlidXRlKGBkYXRhLSR7dHlwZX1gKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnNsaWRlc1tpXS5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNldHRpbmdzLmxvYWRpbmdDbGFzcyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBhY2M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgW10pO1xyXG5cdH0sXHJcblx0bG9hZEltYWdlcyhpKXtcclxuXHRcdGlmKCF0aGlzLm5vZGUucXVlcnlTZWxlY3RvcignW2RhdGEtc3JjXSwgW2RhdGEtc3Jjc2V0XScpKSByZXR1cm47XHJcblx0XHRsZXQgaW5kZXhlcyA9IFtpXTtcclxuXHJcblx0XHRpZih0aGlzLnNsaWRlcy5sZW5ndGggPiAxKSBpbmRleGVzLnB1c2goaSA9PT0gMCA/IHRoaXMuc2xpZGVzLmxlbmd0aCAtIDEgOiBpIC0gMSk7XHJcblx0XHRpZih0aGlzLnNsaWRlcy5sZW5ndGggPiAyKSBpbmRleGVzLnB1c2goaSA9PT0gdGhpcy5zbGlkZXMubGVuZ3RoIC0gMSA/IDAgOiBpICsgMSk7XHJcblxyXG5cdFx0aW5kZXhlcy5mb3JFYWNoKGlkeCA9PiB7IHRoaXMubG9hZEltYWdlKGlkeCkgfSk7XHJcblx0fSxcclxuXHRyZXNldCgpe1xyXG5cdFx0dGhpcy5zbGlkZXNbdGhpcy5jdXJyZW50SW5kZXhdLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuc2V0dGluZ3MuYWN0aXZlQ2xhc3MpO1xyXG5cdFx0dGhpcy5zbGlkZXNbdGhpcy5jdXJyZW50SW5kZXhdLmNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XHJcblx0XHR0aGlzLm5hdkl0ZW1zLmxlbmd0aCAmJiB0aGlzLm5hdkl0ZW1zW3RoaXMuY3VycmVudEluZGV4XS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtY3VycmVudCcpO1xyXG5cclxuXHRcdGxldCBwcmV2aW91c2x5SGlkZGVuID0gdGhpcy5ub2RlLnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuc2V0dGluZ3MuaGlkZVByZXZpb3VzQ2xhc3N9YCksXHJcblx0XHRcdHByZXZpb3VzbHlTaG93biA9IHRoaXMubm9kZS5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLnNldHRpbmdzLnNob3dQcmV2aW91c0NsYXNzfWApLFxyXG5cdFx0XHRuZXh0U2hvd24gPSB0aGlzLm5vZGUucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5zZXR0aW5ncy5zaG93TmV4dENsYXNzfWApLFxyXG5cdFx0XHRuZXh0SGlkZGVuID0gdGhpcy5ub2RlLnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuc2V0dGluZ3MuaGlkZU5leHRDbGFzc31gKTtcclxuXHJcblx0XHRwcmV2aW91c2x5SGlkZGVuICYmIHByZXZpb3VzbHlIaWRkZW4uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNldHRpbmdzLmhpZGVQcmV2aW91c0NsYXNzKTtcclxuXHRcdHByZXZpb3VzbHlTaG93biAmJiBwcmV2aW91c2x5U2hvd24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNldHRpbmdzLnNob3dQcmV2aW91c0NsYXNzKTtcclxuXHRcdG5leHRTaG93biAmJiBuZXh0U2hvd24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNldHRpbmdzLnNob3dOZXh0Q2xhc3MpO1xyXG5cdFx0bmV4dEhpZGRlbiAmJiBuZXh0SGlkZGVuLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5zZXR0aW5ncy5oaWRlTmV4dENsYXNzKTtcclxuXHR9LFxyXG5cdG5leHQoKXtcclxuXHRcdHRoaXMuY2hhbmdlKCh0aGlzLmN1cnJlbnRJbmRleCA9PT0gdGhpcy5zbGlkZXMubGVuZ3RoIC0gMSA/IDAgOiB0aGlzLmN1cnJlbnRJbmRleCArIDEpKTtcclxuXHR9LFxyXG5cdHByZXZpb3VzKCl7XHJcblx0XHR0aGlzLmNoYW5nZSgodGhpcy5jdXJyZW50SW5kZXggPT09IDAgPyB0aGlzLnNsaWRlcy5sZW5ndGggLSAxIDogdGhpcy5jdXJyZW50SW5kZXggLSAxKSk7XHJcblx0fSxcclxuXHRjaGFuZ2UoaW5kZXgpe1xyXG5cdFx0aWYgKGluZGV4ID09PSB0aGlzLmN1cnJlbnRJbmRleCkgcmV0dXJuO1xyXG5cdFx0XHJcblx0XHR0aGlzLnJlc2V0KCk7XHJcblxyXG5cdFx0aW5kZXggPSBpbmRleCA9PT0gLTEgPyB0aGlzLnNsaWRlcy5sZW5ndGggLSAxIDogaW5kZXggPT09IHRoaXMuc2xpZGVzLmxlbmd0aCA/IDAgOiBpbmRleDtcclxuXHJcblx0XHR0aGlzLmxvYWRJbWFnZXMoaW5kZXgpO1xyXG5cdFx0XHJcblx0XHRsZXQgaXNGb3J3YXJkcyA9IChpbmRleCA+IHRoaXMuY3VycmVudEluZGV4IHx8IGluZGV4ID09PSAwICYmIHRoaXMuY3VycmVudEluZGV4ID09PSB0aGlzLnNsaWRlcy5sZW5ndGggLSAxKSAmJiAhKGluZGV4ID09PSAodGhpcy5zbGlkZXMubGVuZ3RoIC0gMSkgJiYgdGhpcy5jdXJyZW50SW5kZXggPT09IDApO1xyXG5cdFx0XHJcblx0XHR0aGlzLnNsaWRlc1t0aGlzLmN1cnJlbnRJbmRleF0uY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoaXNGb3J3YXJkcyA/IHRoaXMuc2V0dGluZ3MuaGlkZVByZXZpb3VzQ2xhc3MgOiB0aGlzLnNldHRpbmdzLmhpZGVOZXh0Q2xhc3MpO1xyXG5cdFx0dGhpcy5zbGlkZXNbaW5kZXhdLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGAke2lzRm9yd2FyZHMgPyB0aGlzLnNldHRpbmdzLnNob3dOZXh0Q2xhc3MgOiB0aGlzLnNldHRpbmdzLnNob3dQcmV2aW91c0NsYXNzfWApO1xyXG5cdFx0dGhpcy5zZXRDdXJyZW50KGluZGV4KTtcclxuXHRcdFxyXG5cdFx0KHRoaXMuc2V0dGluZ3MuY2FsbGJhY2sgJiYgdHlwZW9mIHRoaXMuc2V0dGluZ3MuY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpICYmIHRoaXMuc2V0dGluZ3MuY2FsbGJhY2soKTtcclxuXHR9LFxyXG5cdHNldEN1cnJlbnQoaSl7XHJcblx0XHR0aGlzLnNsaWRlc1tpXS5jb250YWluZXIuY2xhc3NMaXN0LmFkZCh0aGlzLnNldHRpbmdzLmFjdGl2ZUNsYXNzKTtcclxuXHRcdHRoaXMuc2xpZGVzW2ldLmNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XHJcblx0XHR0aGlzLnNsaWRlc1tpXS5jb250YWluZXIuZm9jdXMoKTtcclxuXHRcdHRoaXMubmF2SXRlbXMubGVuZ3RoICYmIHRoaXMubmF2SXRlbXNbaV0uc2V0QXR0cmlidXRlKCdhcmlhLWN1cnJlbnQnLCB0cnVlKTtcclxuXHRcdHRoaXMubm90aWZpY2F0aW9uLmlubmVySFRNTCA9IGBTbGlkZSAke2kgKyAxfSBvZiAke3RoaXMuc2xpZGVzLmxlbmd0aH1gO1xyXG5cdFx0dGhpcy5jdXJyZW50SW5kZXggPSBpO1xyXG4gICAgfSxcclxuICAgIGF1dG9QbGF5KHNsaWRlRHVyYXRpb24pIHtcclxuICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm5leHQoKTtcclxuICAgICAgICB9LCBzbGlkZUR1cmF0aW9uID8gc2xpZGVEdXJhdGlvbiAqIDEwMDAgOiA1MDAwKTtcclxuICAgIH1cclxufTsiLCJleHBvcnQgZGVmYXVsdCB7XHJcblx0YnV0dG9uUHJldmlvdXNTZWxlY3RvcjogJy5qcy1zbGlkZXNfX3ByZXZpb3VzJyxcclxuXHRidXR0b25OZXh0U2VsZWN0b3I6ICcuanMtc2xpZGVzX19uZXh0JyxcclxuXHRuYXZJdGVtU2VsZWN0b3I6ICcuanMtc2xpZGVzX19uYXYtaXRlbScsXHJcblx0aXRlbVNlbGVjdG9yOiAnLmpzLXNsaWRlc19faXRlbScsXHJcblx0bGl2ZVJlZ2lvblNlbGVjdG9yOiAnLmpzLXNsaWRlc19fbGl2ZXJlZ2lvbicsXHJcblx0bG9hZGluZ0NsYXNzOiAnaXMtLWxvYWRpbmcnLFxyXG5cdGFjdGl2ZUNsYXNzOiAnaXMtLWN1cnJlbnQnLFxyXG5cdHNob3dQcmV2aW91c0NsYXNzOiAnc2hvdy0tcHJldmlvdXMnLFxyXG5cdHNob3dOZXh0Q2xhc3M6ICdzaG93LS1uZXh0JyxcclxuXHRoaWRlUHJldmlvdXNDbGFzczogJ2hpZGUtLXByZXZpb3VzJyxcclxuXHRoaWRlTmV4dENsYXNzOiAnaGlkZS0tbmV4dCcsXHJcblx0aXNDYXJvdXNlbDogdHJ1ZSxcclxuXHRzdGFydEluZGV4OiAwLFxyXG5cdHByZWxvYWQ6IGZhbHNlXHJcbn07Il19
